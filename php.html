<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PHP Code Editor</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/dracula.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/eclipse.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --php-blue: #8892BF;
            --php-purple: #4F5B93;
            --php-dark: #1e1e1e;
            --php-light: #f8f9fa;
            --php-yellow: #FFD43B;
            --success: #28a745;
            --error: #dc3545;
            --warning: #ffc107;
            --info: #17a2b8;
            --border-radius: 8px;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        body {
            background-color: var(--php-light);
            color: #333;
            transition: var(--transition);
            min-height: 100vh;
            overflow-x: hidden;
        }

        body.dark-mode {
            background-color: var(--php-dark);
            color: var(--php-light);
        }

        /* Animations */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes slideIn {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes typewriter {
            from { width: 0; }
            to { width: 100%; }
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .pulse-animation {
            animation: pulse 0.5s ease-in-out;
        }

        .slide-in {
            animation: slideIn 0.3s ease-out;
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, var(--php-purple), var(--php-blue));
            color: white;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
            animation: slideIn 0.5s ease-out;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            transition: var(--transition);
        }

        .logo:hover {
            transform: translateY(-2px);
        }

        .logo i {
            color: var(--php-yellow);
            font-size: 2.2rem;
            animation: pulse 2s infinite;
            background: rgba(255, 255, 255, 0.1);
            padding: 12px;
            border-radius: 50%;
        }

        .logo h1 {
            font-size: 1.6rem;
            font-weight: 700;
            position: relative;
            overflow: hidden;
        }

        .logo h1::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 3px;
            background: var(--php-yellow);
            transition: width 0.3s ease;
        }

        .logo:hover h1::after {
            width: 100%;
        }

        .controls {
            display: flex;
            gap: 12px;
            align-items: center;
            flex-wrap: wrap;
        }

        .control-btn {
            background: rgba(255, 255, 255, 0.15);
            border: none;
            color: white;
            padding: 10px 18px;
            border-radius: var(--border-radius);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: var(--transition);
            font-weight: 500;
            position: relative;
            overflow: hidden;
            min-width: 110px;
            justify-content: center;
        }

        .control-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .control-btn:hover::before {
            left: 100%;
        }

        .control-btn:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
        }

        .control-btn:active {
            transform: translateY(-1px);
        }

        .control-btn i {
            font-size: 1.1rem;
        }

        .run-btn {
            background: linear-gradient(135deg, var(--success), #20c997);
        }

        .clear-btn {
            background: linear-gradient(135deg, var(--warning), #ff922b);
            color: #333;
        }

        .debug-btn {
            background: linear-gradient(135deg, #9c27b0, #673ab7);
        }

        .about-btn {
            background: linear-gradient(135deg, #ff5722, #ff7043);
        }

        .save-btn {
            background: linear-gradient(135deg, var(--info), #339af0);
        }

        /* Theme toggle */
        .theme-toggle {
            position: relative;
            width: 60px;
            height: 30px;
        }

        .theme-toggle input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 34px;
            transition: var(--transition);
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            border-radius: 50%;
            transition: var(--transition);
            animation: pulse 2s infinite;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        input:checked + .toggle-slider {
            background-color: var(--php-yellow);
        }

        input:checked + .toggle-slider:before {
            transform: translateX(30px);
            background-color: var(--php-purple);
        }

        /* Main Container */
        .container {
            display: flex;
            height: calc(100vh - 70px);
            padding: 20px;
            gap: 20px;
        }

        /* Editor Section */
        .editor-section {
            flex: 3;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .editor-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            animation: slideIn 0.4s ease-out 0.1s both;
            border-left: 5px solid var(--php-purple);
        }

        body.dark-mode .editor-header {
            background: #2d2d2d;
        }

        .editor-header h2 {
            display: flex;
            align-items: center;
            gap: 12px;
            color: var(--php-purple);
        }

        .editor-header h2 i {
            color: var(--php-blue);
            animation: spin 4s linear infinite;
        }

        .editor-options {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .option-btn {
            background: none;
            border: 1px solid #dee2e6;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: var(--transition);
            font-size: 0.9rem;
            color: #666;
        }

        body.dark-mode .option-btn {
            border-color: #555;
            color: #e0e0e0;
        }

        .option-btn:hover {
            background: #f8f9fa;
            transform: scale(1.1);
            border-color: var(--php-blue);
        }

        body.dark-mode .option-btn:hover {
            background: #3a3a3a;
        }

        .editor-container {
            flex: 1;
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            animation: fadeIn 0.6s ease-in 0.2s both;
            border: 2px solid transparent;
            transition: var(--transition);
        }

        .editor-container:hover {
            border-color: var(--php-blue);
            box-shadow: 0 8px 25px rgba(136, 146, 191, 0.3);
        }

        .CodeMirror {
            height: 100% !important;
            font-size: 15px;
            line-height: 1.6;
            font-family: 'Fira Code', 'Consolas', 'Monaco', monospace;
        }

        /* Output Section */
        .output-section {
            flex: 2;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .output-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            animation: slideIn 0.4s ease-out 0.2s both;
            border-left: 5px solid var(--success);
        }

        body.dark-mode .output-header {
            background: #2d2d2d;
        }

        .output-header h2 {
            display: flex;
            align-items: center;
            gap: 12px;
            color: var(--success);
        }

        .output-header h2 i {
            color: #20c997;
            animation: pulse 1.5s infinite;
        }

        .status-indicator {
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            animation: pulse 2s infinite;
        }

        .status-idle {
            background: rgba(108, 117, 125, 0.2);
            color: #6c757d;
        }

        .status-running {
            background: rgba(13, 110, 253, 0.2);
            color: #0d6efd;
        }

        .status-success {
            background: rgba(40, 167, 69, 0.2);
            color: var(--success);
        }

        .status-error {
            background: rgba(220, 53, 69, 0.2);
            color: var(--error);
        }

        .output-container {
            flex: 1;
            background: white;
            border-radius: var(--border-radius);
            padding: 0;
            overflow: hidden;
            box-shadow: var(--shadow);
            display: flex;
            flex-direction: column;
            animation: fadeIn 0.6s ease-in 0.3s both;
        }

        body.dark-mode .output-container {
            background: #2d2d2d;
        }

        .output-tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
        }

        body.dark-mode .output-tabs {
            background: #3a3a3a;
            border-bottom-color: #555;
        }

        .tab-btn {
            padding: 14px 24px;
            border: none;
            background: none;
            cursor: pointer;
            font-weight: 500;
            color: #6c757d;
            transition: var(--transition);
            border-bottom: 3px solid transparent;
            position: relative;
            overflow: hidden;
        }

        body.dark-mode .tab-btn {
            color: #aaa;
        }

        .tab-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(136, 146, 191, 0.1), transparent);
            transition: left 0.5s;
        }

        .tab-btn:hover::before {
            left: 100%;
        }

        .tab-btn:hover {
            color: var(--php-purple);
            background: rgba(136, 146, 191, 0.05);
        }

        .tab-btn.active {
            color: var(--php-purple);
            border-bottom-color: var(--php-purple);
            background: rgba(136, 146, 191, 0.1);
        }

        body.dark-mode .tab-btn.active {
            background: rgba(136, 146, 191, 0.2);
        }

        .tab-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
        }

        #outputContent {
            white-space: pre-wrap;
            word-wrap: break-word;
            min-height: 200px;
        }

        .output-line {
            margin-bottom: 10px;
            padding: 12px 15px;
            border-radius: 6px;
            animation: slideIn 0.3s ease-out;
            border-left: 4px solid transparent;
            background: #f8f9fa;
            transition: var(--transition);
        }

        body.dark-mode .output-line {
            background: #3a3a3a;
        }

        .output-line:hover {
            transform: translateX(5px);
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .output-line.info {
            border-left-color: var(--info);
            color: var(--info);
        }

        .output-line.success {
            border-left-color: var(--success);
            color: var(--success);
        }

        .output-line.error {
            border-left-color: var(--error);
            color: var(--error);
        }

        .output-line.warning {
            border-left-color: var(--warning);
            color: var(--warning);
        }

        .output-line.output {
            border-left-color: #666;
            color: #495057;
        }

        body.dark-mode .output-line.output {
            color: #e0e0e0;
        }

        .output-line.debug {
            border-left-color: #9c27b0;
            color: #9c27b0;
            font-style: italic;
        }

        /* Terminal Input */
        .terminal-input {
            display: none;
            gap: 12px;
            margin-top: 15px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.05);
            border-radius: var(--border-radius);
            animation: slideIn 0.3s ease-out;
            align-items: center;
        }

        body.dark-mode .terminal-input {
            background: rgba(255, 255, 255, 0.05);
        }

        .terminal-input span {
            color: var(--success);
            font-weight: bold;
            animation: pulse 2s infinite;
            font-family: 'Courier New', monospace;
        }

        .terminal-input input {
            flex: 1;
            background: transparent;
            border: none;
            color: inherit;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            outline: none;
            padding: 8px 12px;
            border-radius: 4px;
            border: 1px solid #dee2e6;
            transition: var(--transition);
        }

        body.dark-mode .terminal-input input {
            border-color: #555;
        }

        .terminal-input input:focus {
            border-color: var(--php-blue);
            animation: pulse 1s infinite;
            box-shadow: 0 0 0 3px rgba(136, 146, 191, 0.1);
        }

        /* Examples Panel */
        .examples-panel {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--shadow);
            animation: fadeIn 0.6s ease-in 0.4s both;
        }

        body.dark-mode .examples-panel {
            background: #2d2d2d;
        }

        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--php-purple);
        }

        .panel-header h3 {
            color: var(--php-purple);
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.3rem;
        }

        .panel-header h3 i {
            animation: spin 4s linear infinite;
        }

        .examples-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
        }

        .example-card {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: var(--border-radius);
            padding: 20px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            flex-direction: column;
            gap: 12px;
            position: relative;
            overflow: hidden;
        }

        body.dark-mode .example-card {
            background: #3a3a3a;
            border-color: #555;
        }

        .example-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--php-blue), transparent);
            transition: left 0.5s;
        }

        .example-card:hover::before {
            left: 100%;
        }

        .example-card:hover {
            border-color: var(--php-blue);
            transform: translateY(-8px) scale(1.03);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
            animation: float 2s ease-in-out infinite;
        }

        .example-card:active {
            transform: translateY(-4px) scale(1.01);
        }

        .example-card h4 {
            color: var(--php-purple);
            font-size: 1.1rem;
            margin: 0;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .example-card p {
            color: #666;
            font-size: 0.9rem;
            line-height: 1.5;
            margin: 0;
        }

        body.dark-mode .example-card p {
            color: #aaa;
        }

        .example-tags {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
            margin-top: 8px;
        }

        .tag {
            padding: 4px 10px;
            background: rgba(136, 146, 191, 0.1);
            border-radius: 15px;
            font-size: 0.75rem;
            color: var(--php-purple);
            font-weight: 500;
            transition: var(--transition);
        }

        body.dark-mode .tag {
            background: rgba(136, 146, 191, 0.2);
        }

        .tag:hover {
            transform: scale(1.1);
            background: rgba(136, 146, 191, 0.3);
        }

        /* Modals */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: 1000;
            animation: fadeIn 0.3s ease-in;
            backdrop-filter: blur(5px);
        }

        .modal.active {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            border-radius: var(--border-radius);
            padding: 30px;
            width: 90%;
            max-width: 700px;
            max-height: 85vh;
            overflow-y: auto;
            animation: slideIn 0.4s ease-out;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            border: 2px solid var(--php-purple);
        }

        body.dark-mode .modal-content {
            background: #2d2d2d;
            color: white;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--php-purple);
        }

        .modal-header h2 {
            color: var(--php-purple);
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.8rem;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 2rem;
            cursor: pointer;
            color: #666;
            transition: var(--transition);
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .close-modal:hover {
            color: var(--error);
            transform: rotate(90deg);
            background: rgba(220, 53, 69, 0.1);
        }

        /* About PHP Content */
        .php-facts {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }

        .fact-card {
            background: linear-gradient(135deg, var(--php-purple), var(--php-blue));
            color: white;
            padding: 25px;
            border-radius: var(--border-radius);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            animation: float 3s ease-in-out infinite;
        }

        .fact-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            transform: rotate(45deg);
            transition: transform 0.5s;
        }

        .fact-card:hover::before {
            transform: rotate(45deg) translate(20%, 20%);
        }

        .fact-card:hover {
            transform: translateY(-10px) scale(1.05);
            box-shadow: 0 20px 40px rgba(79, 91, 147, 0.3);
        }

        .fact-card h3 {
            color: var(--php-yellow);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.3rem;
        }

        .fact-card p {
            font-size: 0.95rem;
            line-height: 1.6;
            opacity: 0.9;
        }

        /* Debug Panel */
        .debug-panel {
            background: #f8f9fa;
            border-radius: var(--border-radius);
            padding: 20px;
            margin-top: 20px;
            border-left: 4px solid #9c27b0;
        }

        body.dark-mode .debug-panel {
            background: #2d2d2d;
        }

        .debug-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .debug-item {
            padding: 12px;
            background: white;
            border-radius: 6px;
            font-size: 0.9rem;
            transition: var(--transition);
            border: 1px solid #dee2e6;
        }

        body.dark-mode .debug-item {
            background: #3a3a3a;
            border-color: #555;
        }

        .debug-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-color: var(--php-blue);
        }

        .debug-item span {
            display: block;
            font-weight: 600;
            color: var(--php-purple);
            margin-bottom: 5px;
        }

        .debug-value {
            font-family: 'Courier New', monospace;
            color: #666;
        }

        body.dark-mode .debug-value {
            color: #aaa;
        }

        /* Code Visualization */
        .code-visualization {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: var(--border-radius);
            margin-top: 25px;
            font-family: 'Fira Code', 'Consolas', monospace;
            overflow-x: auto;
            border: 1px solid #333;
        }

        .code-visualization pre {
            margin: 0;
            font-size: 13px;
            line-height: 1.5;
        }

        /* PHP Elephant Animation */
        .php-elephant {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            z-index: 1000;
            display: none;
            animation: float 3s ease-in-out infinite;
        }

        .php-elephant i {
            font-size: 3rem;
            color: var(--php-purple);
            text-shadow: 0 0 10px rgba(136, 146, 191, 0.5);
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 20px;
            background: white;
            color: #666;
            font-size: 0.9rem;
            border-top: 1px solid #eee;
            animation: fadeIn 1s ease-in 0.5s both;
        }

        body.dark-mode .footer {
            background: #2d2d2d;
            border-top-color: #444;
            color: #aaa;
        }

        .footer-content {
            max-width: 800px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .footer-icons {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin: 10px 0;
        }

        .footer-icon {
            color: var(--php-blue);
            font-size: 1.4rem;
            transition: var(--transition);
            animation: float 2s ease-in-out infinite;
            animation-delay: calc(var(--i) * 0.1s);
        }

        .footer-icon:hover {
            color: var(--php-purple);
            transform: scale(1.3) rotate(15deg);
            animation: none;
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .container {
                flex-direction: column;
                height: auto;
            }
            
            .editor-container {
                min-height: 400px;
            }
            
            .output-container {
                min-height: 300px;
            }
        }

        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                gap: 15px;
                padding: 1rem;
                text-align: center;
            }
            
            .controls {
                width: 100%;
                justify-content: center;
            }
            
            .control-btn {
                min-width: 90px;
                padding: 8px 12px;
                font-size: 0.9rem;
            }
            
            .examples-grid {
                grid-template-columns: 1fr;
            }
            
            .php-facts {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                padding: 20px;
                width: 95%;
            }
        }

        /* Console styling */
        .tab-content::-webkit-scrollbar {
            width: 8px;
        }

        .tab-content::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }

        .tab-content::-webkit-scrollbar-thumb {
            background: var(--php-blue);
            border-radius: 4px;
        }

        .tab-content::-webkit-scrollbar-thumb:hover {
            background: var(--php-purple);
        }

        body.dark-mode .tab-content::-webkit-scrollbar-track {
            background: #2d2d2d;
        }

        body.dark-mode .tab-content::-webkit-scrollbar-thumb {
            background: #555;
        }

        body.dark-mode .tab-content::-webkit-scrollbar-thumb:hover {
            background: var(--php-blue);
        }

        /* Loading animation */
        .loader {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--php-blue);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        /* Typewriter effect */
        .typewriter {
            overflow: hidden;
            border-right: 0.15em solid var(--php-yellow);
            white-space: nowrap;
            margin: 0 auto;
            letter-spacing: 0.15em;
            animation: typewriter 3.5s steps(40, end), blink-caret 0.75s step-end infinite;
        }

        @keyframes blink-caret {
            from, to { border-color: transparent; }
            50% { border-color: var(--php-yellow); }
        }

        /* Progress Bar */
        .progress-bar {
            width: 100%;
            height: 6px;
            background: #e9ecef;
            border-radius: 3px;
            overflow: hidden;
            margin: 20px 0;
        }

        body.dark-mode .progress-bar {
            background: #3a3a3a;
        }

        .progress {
            height: 100%;
            background: linear-gradient(90deg, var(--php-purple), var(--php-blue));
            width: 0%;
            transition: width 0.3s ease;
            animation: pulse 2s infinite;
        }

        /* Syntax preview */
        .syntax-preview {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid var(--php-purple);
            font-family: 'Fira Code', monospace;
            font-size: 0.9rem;
        }

        body.dark-mode .syntax-preview {
            background: #3a3a3a;
        }

        /* Floating particles */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: var(--php-blue);
            border-radius: 50%;
            animation: float 8s infinite linear;
            opacity: 0.3;
        }
    </style>
</head>
<body>
    <!-- PHP Elephant Animation -->
    <div class="php-elephant" id="phpElephant">
        <i class="fab fa-php"></i>
    </div>

    <!-- About PHP Modal -->
    <div class="modal" id="aboutModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fab fa-php"></i> About PHP</h2>
                <button class="close-modal" id="closeAboutModal">&times;</button>
            </div>
            
            <div class="typewriter">
                <h3 style="color: var(--php-purple); text-align: center; margin: 20px 0;">PHP: Hypertext Preprocessor</h3>
            </div>
            
            <div class="php-facts">
                <div class="fact-card">
                    <h3><i class="fas fa-server"></i> What is PHP?</h3>
                    <p>A popular general-purpose scripting language especially suited to web development. Created by Rasmus Lerdorf in 1994.</p>
                </div>
                <div class="fact-card">
                    <h3><i class="fas fa-rocket"></i> Key Features</h3>
                    <p>â€¢ Server-side execution<br>â€¢ Easy integration with HTML<br>â€¢ Extensive database support<br>â€¢ Huge community & resources</p>
                </div>
                <div class="fact-card">
                    <h3><i class="fas fa-code"></i> Popular Uses</h3>
                    <p>â€¢ WordPress, Laravel, Symfony<br>â€¢ E-commerce platforms<br>â€¢ Content Management Systems<br>â€¢ REST APIs & Web Services</p>
                </div>
            </div>

            <div class="code-visualization">
                <h4 style="color: var(--php-yellow); margin-bottom: 15px;">
                    <i class="fas fa-code"></i> Why PHP is Great for Web Development:
                </h4>
                <pre><code>&lt;?php
// Simple and clean syntax
echo "Hello, World! ðŸŒ";

// Built-in web server functionality
$name = $_GET['name'] ?? 'Guest';
echo "Welcome, $name!";

// Database integration made easy
$pdo = new PDO('mysql:host=localhost;dbname=test', 'user', 'pass');
$stmt = $pdo->prepare('SELECT * FROM users WHERE active = ?');
$stmt->execute([1]);

// Powerful frameworks
// Laravel, Symfony, CodeIgniter, CakePHP

// Modern PHP features
$array = [1, 2, 3];
$result = array_map(fn($x) => $x * 2, $array);
?&gt;</code></pre>
            </div>

            <div class="debug-panel">
                <h4><i class="fas fa-chart-line"></i> PHP Statistics:</h4>
                <div class="debug-info">
                    <div class="debug-item">
                        <span>Release Year</span>
                        <div class="debug-value">1994</div>
                    </div>
                    <div class="debug-item">
                        <span>Latest Version</span>
                        <div class="debug-value">PHP 8.3+</div>
                    </div>
                    <div class="debug-item">
                        <span>Market Share</span>
                        <div class="debug-value">~77% of Websites</div>
                    </div>
                    <div class="debug-item">
                        <span>TIOBE Rank</span>
                        <div class="debug-value">#11 (2024)</div>
                    </div>
                </div>
            </div>

            <button class="control-btn run-btn" id="runHelloPHP" style="margin-top: 25px; width: 100%; padding: 15px; font-size: 1.1rem;">
                <i class="fas fa-magic"></i> Run Hello PHP Example
            </button>
        </div>
    </div>

    <!-- Debug Modal -->
    <div class="modal" id="debugModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-bug"></i> PHP Debug Tools</h2>
                <button class="close-modal" id="closeDebugModal">&times;</button>
            </div>
            
            <div class="debug-panel">
                <h3><i class="fas fa-tools"></i> Debug Utilities</h3>
                <div class="debug-info">
                    <div class="debug-item">
                        <span>Code Length</span>
                        <div class="debug-value" id="codeLength">0 chars</div>
                    </div>
                    <div class="debug-item">
                        <span>Lines of Code</span>
                        <div class="debug-value" id="lineCount">0</div>
                    </div>
                    <div class="debug-item">
                        <span>Functions</span>
                        <div class="debug-value" id="functionCount">0</div>
                    </div>
                    <div class="debug-item">
                        <span>Classes</span>
                        <div class="debug-value" id="classCount">0</div>
                    </div>
                </div>
            </div>

            <div class="debug-panel">
                <h3><i class="fas fa-search"></i> Code Analysis</h3>
                <button class="control-btn debug-btn" id="analyzeBtn" style="width: 100%; margin-bottom: 15px; padding: 12px;">
                    <i class="fas fa-search"></i> Analyze PHP Code
                </button>
                <div id="analysisResults"></div>
            </div>

            <div class="debug-panel">
                <h3><i class="fas fa-vial"></i> Syntax Check</h3>
                <button class="control-btn run-btn" id="syntaxBtn" style="width: 100%; margin-bottom: 15px; padding: 12px;">
                    <i class="fas fa-check-circle"></i> Check Syntax
                </button>
                <div class="progress-bar">
                    <div class="progress" id="syntaxProgress"></div>
                </div>
                <div id="syntaxResults" style="margin-top: 15px;"></div>
            </div>

            <div class="debug-panel">
                <h3><i class="fas fa-cogs"></i> Performance Analysis</h3>
                <button class="control-btn" id="performanceBtn" style="width: 100%; padding: 12px;">
                    <i class="fas fa-stopwatch"></i> Analyze Performance
                </button>
                <div id="performanceResults" style="margin-top: 15px;"></div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="logo" id="logo">
            <i class="fab fa-php"></i>
            <h1>PHP Code Editor</h1>
        </div>
        <div class="controls">
            <button class="control-btn run-btn" id="runBtn">
                <i class="fas fa-play"></i> Run PHP
            </button>
            <button class="control-btn clear-btn" id="clearBtn">
                <i class="fas fa-broom"></i> Clear
            </button>
            <button class="control-btn debug-btn" id="debugBtn">
                <i class="fas fa-bug"></i> Debug
            </button>
            <button class="control-btn about-btn" id="aboutBtn">
                <i class="fas fa-info-circle"></i> About PHP
            </button>
            <button class="control-btn save-btn" id="saveBtn">
                <i class="fas fa-save"></i> Save
            </button>
            <button class="control-btn" id="shareBtn">
                <i class="fas fa-share-alt"></i> Share
            </button>
            <div class="theme-toggle">
                <input type="checkbox" id="themeToggle">
                <label class="toggle-slider" for="themeToggle"></label>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="container">
        <!-- Editor Section -->
        <section class="editor-section">
            <div class="editor-header">
                <h2><i class="fas fa-code"></i> PHP Editor</h2>
                <div class="editor-options">
                    <button class="option-btn" id="fontIncrease" title="Increase Font Size">
                        <i class="fas fa-plus"></i>
                    </button>
                    <button class="option-btn" id="fontDecrease" title="Decrease Font Size">
                        <i class="fas fa-minus"></i>
                    </button>
                    <button class="option-btn" id="formatBtn" title="Format Code">
                        <i class="fas fa-indent"></i> Format
                    </button>
                    <button class="option-btn" id="showElephant" title="Show PHP Elephant">
                        <i class="fas fa-elephant"></i>
                    </button>
                </div>
            </div>
            <div class="editor-container">
                <textarea id="codeEditor"></textarea>
            </div>
            
            <!-- Examples Panel -->
            <div class="examples-panel">
                <div class="panel-header">
                    <h3><i class="fas fa-lightbulb"></i> PHP Code Examples</h3>
                    <div class="status-indicator status-idle" id="statusIndicator">
                        <i class="fas fa-circle"></i> Ready
                    </div>
                </div>
                <div class="examples-grid">
                    <div class="example-card" data-example="hello">
                        <h4><i class="fas fa-hand-wave"></i> Hello World</h4>
                        <p>Basic PHP program with output</p>
                        <div class="example-tags">
                            <span class="tag">beginner</span>
                            <span class="tag">basics</span>
                        </div>
                    </div>
                    <div class="example-card" data-example="forms">
                        <h4><i class="fas fa-edit"></i> Form Handling</h4>
                        <p>Process HTML forms with validation</p>
                        <div class="example-tags">
                            <span class="tag">forms</span>
                            <span class="tag">validation</span>
                        </div>
                    </div>
                    <div class="example-card" data-example="database">
                        <h4><i class="fas fa-database"></i> Database</h4>
                        <p>MySQL connection and queries</p>
                        <div class="example-tags">
                            <span class="tag">mysql</span>
                            <span class="tag">database</span>
                        </div>
                    </div>
                    <div class="example-card" data-example="oop">
                        <h4><i class="fas fa-cube"></i> OOP</h4>
                        <p>Object-oriented programming</p>
                        <div class="example-tags">
                            <span class="tag">classes</span>
                            <span class="tag">objects</span>
                        </div>
                    </div>
                    <div class="example-card" data-example="sessions">
                        <h4><i class="fas fa-cookie-bite"></i> Sessions</h4>
                        <p>Session and cookie management</p>
                        <div class="example-tags">
                            <span class="tag">session</span>
                            <span class="tag">cookies</span>
                        </div>
                    </div>
                    <div class="example-card" data-example="api">
                        <h4><i class="fas fa-cloud"></i> API</h4>
                        <p>Fetch data from external APIs</p>
                        <div class="example-tags">
                            <span class="tag">api</span>
                            <span class="tag">json</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Output Section -->
        <section class="output-section">
            <div class="output-header">
                <h2><i class="fas fa-terminal"></i> Output Console</h2>
                <div class="status-indicator status-idle" id="executionStatus">
                    <i class="fas fa-circle"></i> Ready
                </div>
            </div>
            <div class="output-container">
                <div class="output-tabs">
                    <button class="tab-btn active" data-tab="output">Output</button>
                    <button class="tab-btn" data-tab="html">HTML Result</button>
                    <button class="tab-btn" data-tab="errors">Errors</button>
                </div>
                <div class="tab-content">
                    <div id="outputContent" class="tab-content" style="display: block;">
                        <div class="output-line info">
                            <i class="fas fa-info-circle"></i> Welcome to PHP Code Editor!
                        </div>
                        <div class="output-line info">
                            <i class="fas fa-info-circle"></i> Write PHP code and click "Run PHP" to execute
                        </div>
                        <div class="output-line success">
                            <i class="fas fa-check-circle"></i> Supports PHP 8.3+ features
                        </div>
                    </div>
                    <div id="htmlOutput" class="tab-content" style="display: none;">
                        <!-- HTML output will be displayed here -->
                    </div>
                    <div id="errorsTab" class="tab-content" style="display: none;">
                        <!-- Errors will be displayed here -->
                    </div>
                </div>
                <!-- Terminal Input for interactive PHP scripts -->
                <div class="terminal-input" id="terminalInput">
                    <span>$</span>
                    <input type="text" id="userInput" placeholder="Enter input for PHP script...">
                    <button class="control-btn run-btn" id="submitInput" style="padding: 8px 15px;">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </section>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-icons">
                <i class="fab fa-php footer-icon" style="--i: 0"></i>
                <i class="fas fa-code footer-icon" style="--i: 1"></i>
                <i class="fas fa-server footer-icon" style="--i: 2"></i>
                <i class="fas fa-database footer-icon" style="--i: 3"></i>
                <i class="fas fa-bolt footer-icon" style="--i: 4"></i>
            </div>
            <p>
                <i class="fas fa-code"></i> PHP Code Editor | 
                <i class="fas fa-shield-alt"></i> Secure Execution | 
                <i class="fas fa-bolt"></i> Real-time Results
            </p>
            <p style="margin-top: 10px; font-size: 0.85rem; color: #888;">
                Note: This editor simulates PHP execution. For actual PHP execution, use a PHP server.
            </p>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/php/php.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/edit/matchbrackets.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/comment/comment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/hint/show-hint.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/hint/anyword-hint.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/display/autorefresh.min.js"></script>
    
    <script>
        // Initialize CodeMirror Editor
        const editor = CodeMirror.fromTextArea(document.getElementById('codeEditor'), {
            mode: 'application/x-httpd-php',
            theme: 'eclipse',
            lineNumbers: true,
            indentUnit: 4,
            smartIndent: true,
            matchBrackets: true,
            autoCloseBrackets: true,
            autoRefresh: true,
            extraKeys: {
                'Ctrl-Space': 'autocomplete',
                'Ctrl-/': 'toggleComment',
                'F11': function(cm) {
                    cm.setOption("fullScreen", !cm.getOption("fullScreen"));
                },
                'Esc': function(cm) {
                    if (cm.getOption("fullScreen")) cm.setOption("fullScreen", false);
                },
                'Tab': function(cm) {
                    cm.replaceSelection('    ', 'end');
                }
            },
            hintOptions: {
                hint: CodeMirror.hint.anyword,
                completeSingle: false
            }
        });

        // Set initial PHP code
        editor.setValue(`<?php
// Welcome to PHP Code Editor!
// This is a sample PHP program
// Click "Run PHP" to execute it

echo "<h2 style='color: #4F5B93;'>PHP Code Editor</h2>";
echo "<p>Write and execute PHP code directly in your browser!</p>";
echo "<hr>";

// Display PHP Information
echo "<h3>PHP Information:</h3>";
echo "<p><strong>PHP Simulation Version:</strong> PHP 8.3</p>";
echo "<p><strong>Current Time:</strong> " . date('Y-m-d H:i:s') . "</p>";
echo "<p><strong>Server Software:</strong> PHP Online Editor</p>";

// Basic PHP Examples
echo "<h3>Basic PHP Examples:</h3>";

// Variables
$name = "PHP Developer";
$age = 25;
$salary = 55000.50;
$isActive = true;
$languages = ["PHP", "JavaScript", "HTML", "CSS", "MySQL"];

echo "<p><strong>Name:</strong> $name</p>";
echo "<p><strong>Age:</strong> $age years</p>";
echo "<p><strong>Salary:</strong> \$" . number_format($salary, 2) . "</p>";
echo "<p><strong>Active:</strong> " . ($isActive ? "Yes" : "No") . "</p>";
echo "<p><strong>Languages:</strong> " . implode(", ", $languages) . "</p>";

// Functions
function calculateCircleArea($radius) {
    return pi() * $radius * $radius;
}

echo "<p><strong>Area of circle (radius=7):</strong> " . calculateCircleArea(7) . "</p>";

// Arrays
echo "<h3>Array Examples:</h3>";
$colors = ["red" => "#FF0000", "green" => "#00FF00", "blue" => "#0000FF"];
foreach ($colors as $name => $hex) {
    echo "<p style='color: $hex;'><strong>$name:</strong> $hex</p>";
}

// Object Oriented Example
class Car {
    public $brand;
    public $model;
    public $year;
    
    public function __construct($brand, $model, $year) {
        $this->brand = $brand;
        $this->model = $model;
        $this->year = $year;
    }
    
    public function getInfo() {
        return "$this->year $this->brand $this->model";
    }
}

$car = new Car("Toyota", "Camry", 2023);
echo "<p><strong>Car:</strong> " . $car->getInfo() . "</p>";

// Database Simulation
echo "<h3>Database Simulation:</h3>";
echo "<p style='color: green;'>âœ“ Connected to MySQL database successfully</p>";
echo "<p>Table: users (found 8 records)</p>";

// Form Handling Simulation
echo "<h3>Form Handling Simulation:</h3>";
if (isset($_GET['name'])) {
    $inputName = htmlspecialchars($_GET['name']);
    echo "<p>Hello, $inputName! Welcome back.</p>";
} else {
    echo "<p>Try adding ?name=YourName to the URL</p>";
}

echo "<hr>";
echo "<div style='background: #d4edda; padding: 15px; border-radius: 5px; margin-top: 20px;'>";
echo "<h4 style='color: #155724;'>âœ“ PHP Code Execution Complete!</h4>";
echo "<p>Try modifying the code above or load examples from the panel below.</p>";
echo "</div>";

// This would be sent to JavaScript for debug panel
$debug_data = [
    'variables' => get_defined_vars(),
    'execution_time' => microtime(true) - $_SERVER['REQUEST_TIME_FLOAT'] ?? microtime(true),
    'memory_usage' => memory_get_usage(),
    'peak_memory' => memory_get_peak_usage()
];

echo "<script>window.phpDebugData = " . json_encode($debug_data) . ";</script>";

?>`);

        // Theme Toggle
        const themeToggle = document.getElementById('themeToggle');
        const body = document.body;
        
        // Check for saved theme preference
        const savedTheme = localStorage.getItem('phpEditorTheme');
        if (savedTheme === 'dark') {
            body.classList.add('dark-mode');
            themeToggle.checked = true;
            editor.setOption('theme', 'dracula');
        }
        
        themeToggle.addEventListener('change', () => {
            body.classList.toggle('dark-mode');
            if (body.classList.contains('dark-mode')) {
                editor.setOption('theme', 'dracula');
                localStorage.setItem('phpEditorTheme', 'dark');
                addOutput('info', 'ðŸŒ™ Switched to dark theme');
            } else {
                editor.setOption('theme', 'eclipse');
                localStorage.setItem('phpEditorTheme', 'light');
                addOutput('info', 'â˜€ï¸ Switched to light theme');
            }
        });

        // Tab Switching
        document.querySelectorAll('.tab-btn').forEach(tab => {
            tab.addEventListener('click', () => {
                // Remove active class from all tabs
                document.querySelectorAll('.tab-btn').forEach(t => t.classList.remove('active'));
                // Hide all tab contents
                document.querySelectorAll('.tab-content').forEach(c => c.style.display = 'none');
                
                // Activate clicked tab
                tab.classList.add('active');
                const tabId = tab.dataset.tab + (tab.dataset.tab === 'output' ? 'Content' : 
                               tab.dataset.tab === 'html' ? 'Output' : 'Tab');
                document.getElementById(tabId).style.display = 'block';
            });
        });

        // Create floating particles
        function createParticles() {
            const particles = document.createElement('div');
            particles.className = 'particles';
            document.body.appendChild(particles);
            
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.top = `${Math.random() * 100}%`;
                particle.style.animationDelay = `${Math.random() * 8}s`;
                particle.style.animationDuration = `${Math.random() * 10 + 5}s`;
                particles.appendChild(particle);
            }
        }
        
        createParticles();

        // PHP Elephant Animation
        const phpElephant = document.getElementById('phpElephant');
        document.getElementById('showElephant').addEventListener('click', () => {
            phpElephant.style.display = 'block';
            setTimeout(() => {
                phpElephant.style.display = 'none';
            }, 3000);
        });

        // Run PHP Code
        document.getElementById('runBtn').addEventListener('click', async () => {
            const code = editor.getValue();
            const status = document.getElementById('executionStatus');
            const statusIndicator = document.getElementById('statusIndicator');
            
            // Add animation
            document.getElementById('runBtn').classList.add('pulse-animation');
            setTimeout(() => {
                document.getElementById('runBtn').classList.remove('pulse-animation');
            }, 500);
            
            // Clear previous outputs
            clearOutput();
            
            status.className = 'status-indicator status-running';
            status.innerHTML = '<div class="loader"></div> Executing...';
            
            statusIndicator.className = 'status-indicator status-running';
            statusIndicator.innerHTML = '<div class="loader"></div> Running';
            
            addOutput('info', 'Executing PHP code...');
            addOutput('output', 'â”€'.repeat(60));
            
            try {
                // Simulate PHP execution with delay
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                // Extract PHP code and simulate execution
                const phpCode = code;
                const output = simulatePHPExecution(phpCode);
                
                // Display output
                if (output.html) {
                    document.getElementById('htmlOutput').innerHTML = output.html;
                    addOutput('output', output.text);
                }
                
                // Show errors if any
                if (output.errors && output.errors.length > 0) {
                    const errorsTab = document.getElementById('errorsTab');
                    errorsTab.innerHTML = '';
                    output.errors.forEach(error => {
                        errorsTab.innerHTML += `<div class="output-line error">${error}</div>`;
                    });
                }
                
                status.className = 'status-indicator status-success';
                status.innerHTML = '<i class="fas fa-check-circle"></i> Success';
                
                statusIndicator.className = 'status-indicator status-success';
                statusIndicator.innerHTML = '<i class="fas fa-check-circle"></i> Ready';
                
                addOutput('output', 'â”€'.repeat(60));
                addOutput('success', 'âœ“ PHP code executed successfully! ðŸŽ‰');
                
                // Show PHP elephant animation
                phpElephant.style.display = 'block';
                setTimeout(() => {
                    phpElephant.style.display = 'none';
                }, 2000);
                
                // Update debug info
                updateDebugInfo();
                
            } catch (error) {
                status.className = 'status-indicator status-error';
                status.innerHTML = '<i class="fas fa-exclamation-circle"></i> Error';
                
                statusIndicator.className = 'status-indicator status-error';
                statusIndicator.innerHTML = '<i class="fas fa-exclamation-circle"></i> Error';
                
                addOutput('error', `Execution error: ${error.message}`);
                addOutput('info', 'ðŸ’¡ Check your PHP syntax and try again.');
            }
        });

        // Simulate PHP Execution
        function simulatePHPExecution(code) {
            const result = {
                text: '',
                html: '',
                errors: []
            };
            
            // Basic PHP parsing simulation
            const lines = code.split('\n');
            let inPhp = false;
            let output = '';
            
            lines.forEach((line, index) => {
                const trimmed = line.trim();
                
                // Handle PHP tags
                if (trimmed.startsWith('<?php') || trimmed.startsWith('<?=') || trimmed === '<?') {
                    inPhp = true;
                    return;
                }
                
                if (trimmed === '?>') {
                    inPhp = false;
                    return;
                }
                
                // Process PHP code
                if (inPhp) {
                    // Handle echo statements
                    const echoMatch = line.match(/echo\s+["']([^"']+)["']/);
                    if (echoMatch) {
                        const text = echoMatch[1];
                        result.text += text + '\n';
                        result.html += `<p>${text}</p>`;
                    }
                    
                    // Handle echo with variables
                    const echoVarMatch = line.match(/echo\s+["'](.+)["']/);
                    if (echoVarMatch) {
                        const text = echoVarMatch[1];
                        result.text += text + '\n';
                        result.html += `<p>${text}</p>`;
                    }
                    
                    // Handle print
                    const printMatch = line.match(/print\s+["']([^"']+)["']/);
                    if (printMatch) {
                        const text = printMatch[1];
                        result.text += text + '\n';
                        result.html += `<p>${text}</p>`;
                    }
                    
                    // Handle var_dump and print_r
                    if (line.includes('var_dump') || line.includes('print_r')) {
                        result.text += 'Simulated variable output\n';
                        result.html += '<p>Simulated variable output</p>';
                    }
                } else {
                    // HTML output
                    if (trimmed && !trimmed.startsWith('//') && !trimmed.startsWith('/*')) {
                        result.html += line + '\n';
                    }
                }
                
                // Check for syntax errors
                if (trimmed.includes('error') && trimmed.includes('(')) {
                    result.errors.push(`Potential error on line ${index + 1}: ${trimmed}`);
                }
            });
            
            // If no specific output was found, generate simulated output
            if (!result.text && !result.html) {
                result.text = 'PHP code executed successfully!\n';
                result.html = '<p>PHP code executed successfully!</p>';
                result.text += 'Simulated output based on your code.\n';
                result.html += '<p>Simulated output based on your code.</p>';
            }
            
            return result;
        }

        // Clear Output with animation
        document.getElementById('clearBtn').addEventListener('click', () => {
            document.getElementById('clearBtn').classList.add('pulse-animation');
            setTimeout(() => {
                document.getElementById('clearBtn').classList.remove('pulse-animation');
            }, 500);
            
            clearOutput();
            addOutput('info', 'Output cleared successfully! ðŸ§¹');
            addOutput('info', 'Ready for new execution ðŸš€');
        });

        // Clear output but keep essential messages
        function clearOutput() {
            const outputContent = document.getElementById('outputContent');
            const htmlOutput = document.getElementById('htmlOutput');
            const errorsTab = document.getElementById('errorsTab');
            
            outputContent.innerHTML = `
                <div class="output-line info">
                    <i class="fas fa-info-circle"></i> Output cleared at ${new Date().toLocaleTimeString()}
                </div>
                <div class="output-line info">
                    <i class="fas fa-info-circle"></i> Ready for new execution
                </div>
            `;
            
            htmlOutput.innerHTML = '';
            errorsTab.innerHTML = '';
            
            document.getElementById('executionStatus').className = 'status-indicator status-idle';
            document.getElementById('executionStatus').innerHTML = '<i class="fas fa-circle"></i> Ready';
        }

        // Font size controls
        let fontSize = 15;
        document.getElementById('fontIncrease').addEventListener('click', () => {
            fontSize = Math.min(fontSize + 1, 24);
            editor.getWrapperElement().style.fontSize = `${fontSize}px`;
            editor.refresh();
            addOutput('info', `Font size increased to ${fontSize}px`);
        });
        
        document.getElementById('fontDecrease').addEventListener('click', () => {
            fontSize = Math.max(fontSize - 1, 10);
            editor.getWrapperElement().style.fontSize = `${fontSize}px`;
            editor.refresh();
            addOutput('info', `Font size decreased to ${fontSize}px`);
        });

        // Format button
        document.getElementById('formatBtn').addEventListener('click', () => {
            let code = editor.getValue();
            
            // Basic formatting
            code = code.replace(/\{/g, ' {')
                       .replace(/\}\s*else/g, '} else')
                       .replace(/\}\s*elseif/g, '} elseif')
                       .replace(/\)\s*\{/g, ') {');
            
            // Add proper indentation
            const lines = code.split('\n');
            let indent = 0;
            const formatted = lines.map(line => {
                const trimmed = line.trim();
                if (trimmed === '') return '';
                
                // Handle PHP tag
                if (trimmed.startsWith('<?')) {
                    return trimmed;
                }
                
                if (trimmed === '?>') {
                    return trimmed;
                }
                
                // Handle block endings
                if (trimmed === '}' || trimmed.startsWith('} else') || trimmed.startsWith('} elseif')) {
                    indent = Math.max(0, indent - 1);
                }
                
                const indentedLine = '    '.repeat(indent) + trimmed;
                
                // Handle block beginnings
                if (trimmed.endsWith('{') || trimmed.startsWith('class ') || trimmed.startsWith('function ') || 
                    trimmed.startsWith('if ') || trimmed.startsWith('for ') || trimmed.startsWith('while ') ||
                    trimmed.startsWith('foreach ') || trimmed.startsWith('switch ')) {
                    indent++;
                }
                
                return indentedLine;
            }).join('\n');
            
            editor.setValue(formatted);
            addOutput('success', 'Code formatted successfully! âœ¨');
        });

        // Save Code
        document.getElementById('saveBtn').addEventListener('click', () => {
            const code = editor.getValue();
            const blob = new Blob([code], { type: 'text/php' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `php_code_${Date.now()}.php`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            addOutput('success', 'ðŸ’¾ Code saved as .php file');
        });

        // Share Code
        document.getElementById('shareBtn').addEventListener('click', () => {
            const code = editor.getValue();
            const encoded = btoa(encodeURIComponent(code));
            const shareUrl = `${window.location.origin}${window.location.pathname}#${encoded}`;
            
            // Copy to clipboard
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(shareUrl).then(() => {
                    addOutput('success', 'ðŸ”— Share link copied to clipboard!');
                }).catch(() => {
                    fallbackCopy(shareUrl);
                });
            } else {
                fallbackCopy(shareUrl);
            }
            
            function fallbackCopy(text) {
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                addOutput('success', 'ðŸ”— Share link copied to clipboard!');
            }
        });

        // About PHP Modal
        const aboutModal = document.getElementById('aboutModal');
        const aboutBtn = document.getElementById('aboutBtn');
        const closeAboutModal = document.getElementById('closeAboutModal');
        const runHelloPHP = document.getElementById('runHelloPHP');

        aboutBtn.addEventListener('click', () => {
            aboutModal.classList.add('active');
            document.body.style.overflow = 'hidden';
        });

        closeAboutModal.addEventListener('click', () => {
            aboutModal.classList.remove('active');
            document.body.style.overflow = 'auto';
        });

        runHelloPHP.addEventListener('click', () => {
            aboutModal.classList.remove('active');
            document.body.style.overflow = 'auto';
            
            editor.setValue(`<?php
// Hello PHP!
echo "<h1 style='color: #4F5B93;'>Hello, PHP! ðŸ˜</h1>";
echo "<p>Welcome to the world of PHP programming!</p>";
echo "<hr>";

// Display PHP elephant
echo "<div style='text-align: center; margin: 20px 0;'>";
echo "<i class='fab fa-php' style='font-size: 4rem; color: #8892BF;'></i>";
echo "</div>";

// Fun facts about PHP
echo "<h3>Did you know? ðŸ¤”</h3>";
echo "<ul>";
echo "<li>PHP originally stood for 'Personal Home Page'</li>";
echo "<li>It now stands for 'PHP: Hypertext Preprocessor'</li>";
echo "<li>PHP powers about 77% of all websites</li>";
echo "<li>WordPress, Facebook, and Wikipedia use PHP</li>";
echo "<li>PHP 8.3 is the latest stable version</li>";
echo "</ul>";

// Interactive example
$name = "PHP Learner";
$version = "8.3";
$year = 2024;

echo "<div style='background: linear-gradient(135deg, #4F5B93, #8892BF); color: white; padding: 20px; border-radius: 10px; margin: 20px 0;'>";
echo "<h3>Quick PHP Demo</h3>";
echo "<p>Welcome, <strong>$name</strong>!</p>";
echo "<p>You're using PHP <strong>$version</strong> in <strong>$year</strong></p>";
echo "</div>";

// Array example
$languages = ["PHP", "JavaScript", "HTML", "CSS", "SQL"];
echo "<h3>Web Development Stack:</h3>";
foreach ($languages as $lang) {
    echo "<span style='background: #e9ecef; padding: 5px 10px; margin: 5px; border-radius: 5px; display: inline-block;'>$lang</span>";
}

echo "<hr>";
echo "<p style='color: green; font-weight: bold;'>ðŸŽ‰ Congratulations! You just ran your first PHP program!</p>";
echo "<p>Try modifying this code and click 'Run PHP' again!</p>";

?>`);
            
            addOutput('info', 'Loaded Hello PHP example from About PHP');
            editor.focus();
        });

        // Debug Modal
        const debugModal = document.getElementById('debugModal');
        const debugBtn = document.getElementById('debugBtn');
        const closeDebugModal = document.getElementById('closeDebugModal');
        const analyzeBtn = document.getElementById('analyzeBtn');
        const syntaxBtn = document.getElementById('syntaxBtn');
        const performanceBtn = document.getElementById('performanceBtn');

        debugBtn.addEventListener('click', () => {
            debugModal.classList.add('active');
            document.body.style.overflow = 'hidden';
            updateDebugInfo();
        });

        closeDebugModal.addEventListener('click', () => {
            debugModal.classList.remove('active');
            document.body.style.overflow = 'auto';
        });

        // Update debug information
        function updateDebugInfo() {
            const code = editor.getValue();
            const lines = code.split('\n').filter(line => line.trim() !== '');
            const functions = (code.match(/function\s+\w+\s*\(/gi) || []).length;
            const classes = (code.match(/class\s+\w+/gi) || []).length;
            const variables = (code.match(/\$(\w+)\s*=/g) || []).length;
            
            document.getElementById('codeLength').textContent = `${code.length} chars`;
            document.getElementById('lineCount').textContent = `${lines.length}`;
            document.getElementById('functionCount').textContent = `${functions}`;
            document.getElementById('classCount').textContent = `${classes}`;
        }

        // Code analysis
        analyzeBtn.addEventListener('click', () => {
            const code = editor.getValue();
            const analysisResults = document.getElementById('analysisResults');
            analysisResults.innerHTML = '<div class="output-line info">Analyzing PHP code...</div>';
            
            setTimeout(() => {
                let issues = [];
                let suggestions = [];
                
                // Check for PHP tags
                if (!code.includes('<?php')) {
                    issues.push('âš  No PHP opening tag found');
                }
                
                // Check for echo/print
                if (code.includes('echo') || code.includes('print')) {
                    suggestions.push('âœ“ Output functions detected');
                }
                
                // Check for functions
                if (code.includes('function ')) {
                    suggestions.push('âœ“ Functions detected - good code organization');
                }
                
                // Check for classes
                if (code.includes('class ')) {
                    suggestions.push('âœ“ Classes detected - OOP implementation');
                }
                
                // Check for potential issues
                if (code.includes('while(true)') || code.includes('while (true)')) {
                    issues.push('âš  Infinite loop detected - ensure there\'s a break condition');
                }
                
                if (code.includes('$_GET') || code.includes('$_POST')) {
                    suggestions.push('âœ“ Form handling detected');
                }
                
                // Check for SQL queries (simulated)
                if (code.includes('SELECT') || code.includes('INSERT') || code.includes('UPDATE')) {
                    suggestions.push('âš  SQL queries detected - consider using prepared statements');
                }
                
                // Display results
                analysisResults.innerHTML = `
                    <div class="output-line success"><i class="fas fa-check"></i> Analysis Complete</div>
                    ${issues.map(issue => `<div class="output-line warning">${issue}</div>`).join('')}
                    ${suggestions.map(suggestion => `<div class="output-line info">${suggestion}</div>`).join('')}
                    <div class="output-line debug">Total checks: ${issues.length + suggestions.length}</div>
                `;
            }, 500);
        });

        // Syntax check
        syntaxBtn.addEventListener('click', async () => {
            const syntaxResults = document.getElementById('syntaxResults');
            const syntaxProgress = document.getElementById('syntaxProgress');
            syntaxResults.innerHTML = '<div class="output-line info">Checking PHP syntax...</div>';
            
            const code = editor.getValue();
            const tests = [
                { name: 'PHP Opening Tag', run: () => code.includes('<?php') },
                { name: 'PHP Closing Tag', run: () => code.includes('?>') || !code.includes('?>') },
                { name: 'No Parse Errors', run: () => !code.includes('parse error', true) },
                { name: 'Semicolon Check', run: () => {
                    const lines = code.split('\n');
                    for (let line of lines) {
                        const trimmed = line.trim();
                        if (trimmed && !trimmed.startsWith('//') && !trimmed.startsWith('/*') && 
                            !trimmed.startsWith('*') && !trimmed.endsWith('*/') &&
                            !trimmed.startsWith('#') && !trimmed.includes('<?') &&
                            !trimmed.includes('?>') && !trimmed.endsWith('{') &&
                            !trimmed.endsWith('}') && !trimmed.includes('function ') &&
                            !trimmed.includes('class ') && !trimmed.includes('if ') &&
                            !trimmed.includes('for ') && !trimmed.includes('while ') &&
                            !trimmed.includes('foreach ') && !trimmed.includes('switch ') &&
                            !trimmed.includes('echo ') && !trimmed.includes('print ') &&
                            !trimmed.includes('return ') && !trimmed.includes('break ') &&
                            !trimmed.includes('continue ') && trimmed.includes('=') &&
                            !trimmed.endsWith(';')) {
                            return false;
                        }
                    }
                    return true;
                }},
                { name: 'Bracket Balance', run: () => {
                    const openBraces = (code.match(/\{/g) || []).length;
                    const closeBraces = (code.match(/\}/g) || []).length;
                    return openBraces === closeBraces;
                }}
            ];
            
            let passed = 0;
            for (let i = 0; i < tests.length; i++) {
                syntaxProgress.style.width = `${((i + 1) / tests.length) * 100}%`;
                
                await new Promise(resolve => setTimeout(resolve, 300));
                
                const test = tests[i];
                const passedTest = test.run();
                if (passedTest) passed++;
                
                syntaxResults.innerHTML += `
                    <div class="output-line ${passedTest ? 'success' : 'warning'}">
                        <i class="fas fa-${passedTest ? 'check' : 'times'}"></i> ${test.name}
                    </div>
                `;
            }
            
            syntaxResults.innerHTML += `
                <div class="output-line ${passed === tests.length ? 'success' : 'warning'}">
                    <i class="fas fa-chart-bar"></i> Syntax Score: ${passed}/${tests.length} tests passed
                </div>
            `;
            
            syntaxProgress.style.width = '0%';
        });

        // Performance check
        performanceBtn.addEventListener('click', async () => {
            const performanceResults = document.getElementById('performanceResults');
            performanceResults.innerHTML = '<div class="output-line info">Analyzing performance...</div>';
            
            const code = editor.getValue();
            
            setTimeout(() => {
                const startTime = performance.now();
                const lines = code.split('\n').length;
                const chars = code.length;
                const functions = (code.match(/function\s+\w+\s*\(/gi) || []).length;
                const classes = (code.match(/class\s+\w+/gi) || []).length;
                const loops = (code.match(/(for|while|foreach)\s*\(/gi) || []).length;
                
                const endTime = performance.now();
                const analysisTime = endTime - startTime;
                
                // Performance rating
                let rating = 'Good';
                let ratingColor = 'success';
                if (lines > 100) rating = 'Large';
                if (loops > 5) rating = 'Complex';
                if (analysisTime > 100) rating = 'Heavy';
                if (rating !== 'Good') ratingColor = 'warning';
                
                performanceResults.innerHTML = `
                    <div class="debug-info">
                        <div class="debug-item">
                            <span>Lines</span>
                            <div class="debug-value">${lines}</div>
                        </div>
                        <div class="debug-item">
                            <span>Characters</span>
                            <div class="debug-value">${chars}</div>
                        </div>
                        <div class="debug-item">
                            <span>Functions</span>
                            <div class="debug-value">${functions}</div>
                        </div>
                        <div class="debug-item">
                            <span>Classes</span>
                            <div class="debug-value">${classes}</div>
                        </div>
                    </div>
                    <div class="output-line ${ratingColor}">
                        <i class="fas fa-tachometer-alt"></i> Performance Rating: ${rating}
                    </div>
                    <div class="output-line info">
                        <i class="fas fa-stopwatch"></i> Analysis time: ${analysisTime.toFixed(2)}ms
                    </div>
                `;
            }, 500);
        });

        // Example code loader
        const examples = {
            hello: `<?php
// Hello World in PHP!
echo "<h1 style='color: #4F5B93;'>Hello, World! ðŸ˜</h1>";
echo "<p>Welcome to PHP Programming!</p>";
echo "<hr>";

// Basic output
$name = "PHP Developer";
$age = 30;
$skills = ["PHP", "HTML", "CSS", "JavaScript", "MySQL"];

echo "<p><strong>Name:</strong> $name</p>";
echo "<p><strong>Age:</strong> $age years</p>";
echo "<p><strong>Skills:</strong> " . implode(", ", $skills) . "</p>";

// Date and time
echo "<p><strong>Current Date:</strong> " . date('Y-m-d') . "</p>";
echo "<p><strong>Current Time:</strong> " . date('H:i:s') . "</p>";

// Simple calculation
$radius = 5;
$area = pi() * $radius * $radius;
echo "<p><strong>Area of circle (r=$radius):</strong> " . round($area, 2) . "</p>";

// Array example
$colors = ["Red", "Green", "Blue", "Yellow", "Purple"];
echo "<h3>Color Palette:</h3>";
foreach ($colors as $color) {
    echo "<span style='display: inline-block; padding: 5px 10px; margin: 2px; background: $color; color: white; border-radius: 3px;'>$color</span>";
}

echo "<hr>";
echo "<p style='color: green;'><strong>ðŸŽ‰ Your first PHP program executed successfully!</strong></p>";
?>`,
            
            forms: `<?php
// Form Handling Example
echo "<h2 style='color: #4F5B93;'>PHP Form Handling</h2>";
echo "<p>Simulated form submission</p>";
echo "<hr>";

// Check if form is submitted
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    // Get form data (simulated)
    $name = "John Doe";
    $email = "john@example.com";
    $age = 25;
    $country = "United States";
    $interests = ["Programming", "Design", "Music", "Sports"];
    
    echo "<div style='background: #d4edda; padding: 15px; border-radius: 5px; margin: 20px 0;'>";
    echo "<h3>âœ… Form Submitted Successfully!</h3>";
    echo "<p><strong>Name:</strong> $name</p>";
    echo "<p><strong>Email:</strong> $email</p>";
    echo "<p><strong>Age:</strong> $age</p>";
    echo "<p><strong>Country:</strong> $country</p>";
    echo "<p><strong>Interests:</strong> " . implode(", ", $interests) . "</p>";
    echo "</div>";
}

// Display the form
echo "<h3>Registration Form:</h3>";
echo "<form method='POST' style='max-width: 500px; padding: 20px; background: #f8f9fa; border-radius: 8px;'>";
echo "<div style='margin-bottom: 15px;'>";
echo "<label style='display: block; margin-bottom: 5px; font-weight: bold;'>Full Name:</label>";
echo "<input type='text' name='name' style='width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;' placeholder='Enter your name'>";
echo "</div>";

echo "<div style='margin-bottom: 15px;'>";
echo "<label style='display: block; margin-bottom: 5px; font-weight: bold;'>Email:</label>";
echo "<input type='email' name='email' style='width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;' placeholder='Enter your email'>";
echo "</div>";

echo "<div style='margin-bottom: 15px;'>";
echo "<label style='display: block; margin-bottom: 5px; font-weight: bold;'>Age:</label>";
echo "<input type='number' name='age' min='1' max='120' style='width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;'>";
echo "</div>";

echo "<div style='margin-bottom: 15px;'>";
echo "<label style='display: block; margin-bottom: 5px; font-weight: bold;'>Country:</label>";
echo "<select name='country' style='width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;'>";
echo "<option value=''>Select country</option>";
echo "<option value='US'>United States</option>";
echo "<option value='UK'>United Kingdom</option>";
echo "<option value='CA'>Canada</option>";
echo "<option value='AU'>Australia</option>";
echo "</select>";
echo "</div>";

echo "<div style='margin-bottom: 20px;'>";
echo "<label style='display: block; margin-bottom: 10px; font-weight: bold;'>Interests:</label>";
echo "<div style='display: flex; flex-wrap: wrap; gap: 10px;'>";
echo "<label><input type='checkbox' name='interests[]' value='Programming'> Programming</label>";
echo "<label><input type='checkbox' name='interests[]' value='Design'> Design</label>";
echo "<label><input type='checkbox' name='interests[]' value='Music'> Music</label>";
echo "<label><input type='checkbox' name='interests[]' value='Sports'> Sports</label>";
echo "</div>";
echo "</div>";

echo "<button type='submit' style='background: #4F5B93; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; width: 100%;'>";
echo "Submit Form";
echo "</button>";
echo "</form>";

echo "<hr>";
echo "<p><em>Note: This is a simulation. In a real environment, form data would be processed server-side.</em></p>";
?>`,
            
            database: `<?php
// Database Connection Example
echo "<h2 style='color: #4F5B93;'>PHP MySQL Database Example</h2>";
echo "<hr>";

try {
    echo "<div style='background: #d4edda; padding: 15px; border-radius: 5px; margin-bottom: 20px;'>";
    echo "<h3>âœ… Database Connected Successfully!</h3>";
    echo "<p>MySQL Server: localhost:3306</p>";
    echo "<p>Database: php_editor_db</p>";
    echo "<p>Connection established at: " . date('H:i:s') . "</p>";
    echo "</div>";
    
    // Simulate database operations
    echo "<h3>ðŸ“Š Sample User Data:</h3>";
    
    $users = [
        ["id" => 1, "name" => "John Doe", "email" => "john@example.com", "age" => 30, "created_at" => "2024-01-15"],
        ["id" => 2, "name" => "Jane Smith", "email" => "jane@example.com", "age" => 25, "created_at" => "2024-01-16"],
        ["id" => 3, "name" => "Bob Johnson", "email" => "bob@example.com", "age" => 35, "created_at" => "2024-01-17"],
        ["id" => 4, "name" => "Alice Brown", "email" => "alice@example.com", "age" => 28, "created_at" => "2024-01-18"],
        ["id" => 5, "name" => "Charlie Wilson", "email" => "charlie@example.com", "age" => 32, "created_at" => "2024-01-19"]
    ];
    
    // Display as table
    echo "<table border='1' cellpadding='10' cellspacing='0' style='border-collapse: collapse; width: 100%; margin: 20px 0;'>";
    echo "<thead style='background: #4F5B93; color: white;'>";
    echo "<tr>";
    echo "<th>ID</th>";
    echo "<th>Name</th>";
    echo "<th>Email</th>";
    echo "<th>Age</th>";
    echo "<th>Created At</th>";
    echo "</tr>";
    echo "</thead>";
    echo "<tbody>";
    
    foreach ($users as $user) {
        echo "<tr style='background: " . ($user['id'] % 2 == 0 ? '#f8f9fa' : 'white') . ";'>";
        echo "<td>{$user['id']}</td>";
        echo "<td>{$user['name']}</td>";
        echo "<td>{$user['email']}</td>";
        echo "<td>{$user['age']}</td>";
        echo "<td>{$user['created_at']}</td>";
        echo "</tr>";
    }
    
    echo "</tbody>";
    echo "</table>";
    
    // Statistics
    $totalUsers = count($users);
    $averageAge = array_sum(array_column($users, 'age')) / $totalUsers;
    
    echo "<div style='display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0;'>";
    echo "<div style='background: #e7f3ff; padding: 15px; border-radius: 5px;'>";
    echo "<h4>Total Users</h4>";
    echo "<p style='font-size: 2rem; color: #4F5B93; font-weight: bold;'>$totalUsers</p>";
    echo "</div>";
    
    echo "<div style='background: #fff3cd; padding: 15px; border-radius: 5px;'>";
    echo "<h4>Average Age</h4>";
    echo "<p style='font-size: 2rem; color: #ffc107; font-weight: bold;'>" . round($averageAge, 1) . " years</p>";
    echo "</div>";
    
    echo "<div style='background: #d4edda; padding: 15px; border-radius: 5px;'>";
    echo "<h4>Database Size</h4>";
    echo "<p style='font-size: 2rem; color: #28a745; font-weight: bold;'>45.2 MB</p>";
    echo "</div>";
    echo "</div>";
    
    // Simulate query
    echo "<h3>ðŸ” Sample Query:</h3>";
    echo "<div style='background: #f8f9fa; padding: 15px; border-radius: 5px; font-family: monospace;'>";
    echo "SELECT * FROM users WHERE age > 25 ORDER BY created_at DESC LIMIT 10";
    echo "</div>";
    
    echo "<p style='margin-top: 10px;'>Query returned " . count(array_filter($users, fn($u) => $u['age'] > 25)) . " results</p>";
    
} catch (Exception $e) {
    echo "<div style='background: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px; margin: 20px 0;'>";
    echo "<h3>âŒ Database Error</h3>";
    echo "<p>Error: " . $e->getMessage() . "</p>";
    echo "<p><em>Note: This is a simulation. In a real environment, you would need a MySQL server.</em></p>";
    echo "</div>";
}

echo "<hr>";
echo "<p><strong>ðŸ’¡ Database Tips:</strong></p>";
echo "<ul>";
echo "<li>Always use prepared statements to prevent SQL injection</li>";
echo "<li>Close database connections when done</li>";
echo "<li>Use transactions for multiple related queries</li>";
echo "<li>Regularly backup your database</li>";
echo "</ul>";
?>`,
            
            oop: `<?php
// Object-Oriented Programming in PHP
echo "<h2 style='color: #4F5B93;'>PHP OOP Example</h2>";
echo "<p>Classes, Objects, Inheritance, and Polymorphism</p>";
echo "<hr>";

// Base Class
class Animal {
    protected $name;
    protected $sound;
    
    public function __construct($name, $sound) {
        $this->name = $name;
        $this->sound = $sound;
    }
    
    public function makeSound() {
        return "{$this->name} says {$this->sound}!";
    }
    
    public function getName() {
        return $this->name;
    }
}

// Inheritance - Dog class
class Dog extends Animal {
    private $breed;
    
    public function __construct($name, $breed) {
        parent::__construct($name, "Woof");
        $this->breed = $breed;
    }
    
    public function getBreed() {
        return $this->breed;
    }
    
    public function makeSound() {
        return parent::makeSound() . " (Loudly!)";
    }
}

// Inheritance - Cat class
class Cat extends Animal {
    private $color;
    
    public function __construct($name, $color) {
        parent::__construct($name, "Meow");
        $this->color = $color;
    }
    
    public function getColor() {
        return $this->color;
    }
    
    public function makeSound() {
        return parent::makeSound() . " (Softly!)";
    }
}

// Interface
interface CanFly {
    public function fly();
}

// Bird class implementing interface
class Bird extends Animal implements CanFly {
    private $wingspan;
    
    public function __construct($name, $wingspan) {
        parent::__construct($name, "Chirp");
        $this->wingspan = $wingspan;
    }
    
    public function fly() {
        return "{$this->name} is flying with {$this->wingspan}cm wingspan!";
    }
}

// Create objects
echo "<h3>ðŸ¾ Creating Animals:</h3>";

$animals = [
    new Dog("Buddy", "Golden Retriever"),
    new Cat("Whiskers", "Orange Tabby"),
    new Bird("Tweety", 25),
    new Animal("Generic", "Grrr")
];

// Display animal information
foreach ($animals as $animal) {
    echo "<div style='background: #e7f3ff; padding: 15px; border-radius: 5px; margin: 10px 0;'>";
    echo "<h4>" . $animal->getName() . "</h4>";
    echo "<p>" . $animal->makeSound() . "</p>";
    
    // Type-specific properties
    if ($animal instanceof Dog) {
        echo "<p><strong>Breed:</strong> " . $animal->getBreed() . "</p>";
    } elseif ($animal instanceof Cat) {
        echo "<p><strong>Color:</strong> " . $animal->getColor() . "</p>";
    } elseif ($animal instanceof Bird) {
        echo "<p><strong>Can Fly:</strong> " . $animal->fly() . "</p>";
    }
    
    echo "</div>";
}

// Abstract class example
abstract class Vehicle {
    protected $brand;
    protected $model;
    
    public function __construct($brand, $model) {
        $this->brand = $brand;
        $this->model = $model;
    }
    
    abstract public function getInfo();
    
    public function start() {
        return "Starting {$this->brand} {$this->model}...";
    }
}

class Car extends Vehicle {
    private $doors;
    
    public function __construct($brand, $model, $doors) {
        parent::__construct($brand, $model);
        $this->doors = $doors;
    }
    
    public function getInfo() {
        return "{$this->brand} {$this->model} with {$this->doors} doors";
    }
}

class Motorcycle extends Vehicle {
    private $type;
    
    public function __construct($brand, $model, $type) {
        parent::__construct($brand, $model);
        $this->type = $type;
    }
    
    public function getInfo() {
        return "{$this->brand} {$this->model} - {$this->type} motorcycle";
    }
}

// Demonstrate polymorphism
echo "<h3>ðŸš— Vehicle Examples:</h3>";

$vehicles = [
    new Car("Toyota", "Camry", 4),
    new Motorcycle("Harley-Davidson", "Sportster", "Cruiser"),
    new Car("Honda", "Civic", 2)
];

foreach ($vehicles as $vehicle) {
    echo "<div style='background: #fff3cd; padding: 15px; border-radius: 5px; margin: 10px 0;'>";
    echo "<p><strong>" . $vehicle->getInfo() . "</strong></p>";
    echo "<p>" . $vehicle->start() . "</p>";
    echo "</div>";
}

// Static methods and properties
class MathOperations {
    public static $pi = 3.14159;
    
    public static function add($a, $b) {
        return $a + $b;
    }
    
    public static function circleArea($radius) {
        return self::$pi * $radius * $radius;
    }
}

echo "<h3>ðŸ§® Static Methods:</h3>";
echo "<div style='background: #d4edda; padding: 15px; border-radius: 5px;'>";
echo "<p><strong>PI Constant:</strong> " . MathOperations::$pi . "</p>";
echo "<p><strong>5 + 3 =</strong> " . MathOperations::add(5, 3) . "</p>";
echo "<p><strong>Area of circle (r=7):</strong> " . MathOperations::circleArea(7) . "</p>";
echo "</div>";

echo "<hr>";
echo "<div style='background: #4F5B93; color: white; padding: 20px; border-radius: 5px;'>";
echo "<h3>ðŸŽ¯ OOP Concepts Demonstrated:</h3>";
echo "<ul>";
echo "<li>âœ“ Classes and Objects</li>";
echo "<li>âœ“ Inheritance</li>";
echo "<li>âœ“ Polymorphism</li>";
echo "<li>âœ“ Interfaces</li>";
echo "<li>âœ“ Abstract Classes</li>";
echo "<li>âœ“ Static Methods & Properties</li>";
echo "</ul>";
echo "</div>";
?>`,
            
            sessions: `<?php
// Sessions and Cookies in PHP
echo "<h2 style='color: #4F5B93;'>PHP Sessions & Cookies</h2>";
echo "<p>Managing user state across requests</p>";
echo "<hr>";

// Start session
session_start();

// Handle actions
if (isset($_GET['action'])) {
    switch ($_GET['action']) {
        case 'set_session':
            $_SESSION['username'] = 'PHP_User_' . rand(1000, 9999);
            $_SESSION['login_time'] = date('Y-m-d H:i:s');
            $_SESSION['visit_count'] = ($_SESSION['visit_count'] ?? 0) + 1;
            break;
            
        case 'set_cookie':
            setcookie('user_preference', 'dark_mode', time() + (86400 * 30), "/");
            setcookie('last_visit', date('Y-m-d H:i:s'), time() + (86400 * 365), "/");
            break;
            
        case 'clear_all':
            session_unset();
            session_destroy();
            setcookie('user_preference', '', time() - 3600, "/");
            setcookie('last_visit', '', time() - 3600, "/");
            break;
    }
}

// Display current session data
echo "<h3>ðŸ“Š Current Session Data:</h3>";

if (!empty($_SESSION)) {
    echo "<div style='background: #e7f3ff; padding: 15px; border-radius: 5px; margin: 15px 0;'>";
    echo "<pre style='margin: 0;'>";
    print_r($_SESSION);
    echo "</pre>";
    echo "</div>";
} else {
    echo "<p style='color: #6c757d;'>No session data set</p>";
}

// Display current cookies
echo "<h3>ðŸª Current Cookies:</h3>";

if (!empty($_COOKIE)) {
    echo "<div style='background: #fff3cd; padding: 15px; border-radius: 5px; margin: 15px 0;'>";
    echo "<pre style='margin: 0;'>";
    print_r($_COOKIE);
    echo "</pre>";
    echo "</div>";
} else {
    echo "<p style='color: #6c757d;'>No cookies set</p>";
}

// Session information
echo "<h3>â„¹ï¸ Session Information:</h3>";
echo "<div style='background: #f8f9fa; padding: 15px; border-radius: 5px; margin: 15px 0;'>";
echo "<p><strong>Session ID:</strong> " . session_id() . "</p>";
echo "<p><strong>Session Name:</strong> " . session_name() . "</p>";
echo "<p><strong>Session Status:</strong> " . session_status() . " (0=disabled, 1=none, 2=active)</p>";
echo "<p><strong>Cookie Lifetime:</strong> " . ini_get('session.cookie_lifetime') . " seconds</p>";
echo "</div>";

// Control buttons
echo "<h3>ðŸŽ® Session Controls:</h3>";
echo "<div style='display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0;'>";

echo "<a href='?action=set_session' style='text-decoration: none;'>";
echo "<div style='background: #4F5B93; color: white; padding: 20px; border-radius: 5px; text-align: center; cursor: pointer; transition: all 0.3s;'>";
echo "<i class='fas fa-user-plus' style='font-size: 2rem; margin-bottom: 10px;'></i>";
echo "<h4>Set Session Data</h4>";
echo "</div>";
echo "</a>";

echo "<a href='?action=set_cookie' style='text-decoration: none;'>";
echo "<div style='background: #28a745; color: white; padding: 20px; border-radius: 5px; text-align: center; cursor: pointer; transition: all 0.3s;'>";
echo "<i class='fas fa-cookie-bite' style='font-size: 2rem; margin-bottom: 10px;'></i>";
echo "<h4>Set Cookie</h4>";
echo "</div>";
echo "</a>";

echo "<a href='?action=clear_all' style='text-decoration: none;'>";
echo "<div style='background: #dc3545; color: white; padding: 20px; border-radius: 5px; text-align: center; cursor: pointer; transition: all 0.3s;'>";
echo "<i class='fas fa-trash-alt' style='font-size: 2rem; margin-bottom: 10px;'></i>";
echo "<h4>Clear All</h4>";
echo "</div>";
echo "</a>";
echo "</div>";

// Explanation
echo "<h3>ðŸ“š How Sessions & Cookies Work:</h3>";
echo "<div style='background: #d4edda; padding: 20px; border-radius: 5px; margin: 20px 0;'>";
echo "<p><strong>Sessions:</strong> Store data on the server, identified by a session ID stored in a cookie.</p>";
echo "<p><strong>Cookies:</strong> Store data in the user's browser, sent with every request to the server.</p>";
echo "<p><strong>Common Uses:</strong></p>";
echo "<ul>";
echo "<li>Sessions: User authentication, shopping carts</li>";
echo "<li>Cookies: Remember preferences, tracking analytics</li>";
echo "</ul>";
echo "</div>";

// Security tips
echo "<h3>ðŸ”’ Security Tips:</h3>";
echo "<div style='background: #f8d7da; padding: 15px; border-radius: 5px; color: #721c24;'>";
echo "<p><strong>Important:</strong></p>";
echo "<ul>";
echo "<li>Never store sensitive data in cookies</li>";
echo "<li>Use HTTPS for session cookies</li>";
echo "<li>Regenerate session ID after login</li>";
echo "<li>Set appropriate cookie flags (HttpOnly, Secure)</li>";
echo "</ul>";
echo "</div>";

echo "<hr>";
echo "<p><em>Note: This is a simulation. Session and cookie data is not persisted.</em></p>";
?>`,
            
            api: `<?php
// API Integration Example
echo "<h2 style='color: #4F5B93;'>PHP API Integration</h2>";
echo "<p>Fetching data from external APIs</p>";
echo "<hr>";

// Simulate API responses
function simulateApiCall($endpoint, $delay = 1) {
    // Simulate network delay
    sleep($delay);
    
    $apis = [
        'users' => [
            ['id' => 1, 'name' => 'John Doe', 'email' => 'john@example.com', 'status' => 'active'],
            ['id' => 2, 'name' => 'Jane Smith', 'email' => 'jane@example.com', 'status' => 'active'],
            ['id' => 3, 'name' => 'Bob Johnson', 'email' => 'bob@example.com', 'status' => 'inactive']
        ],
        'posts' => [
            ['id' => 1, 'title' => 'PHP 8.3 Released', 'author' => 'John Doe', 'likes' => 245],
            ['id' => 2, 'title' => 'Web Development Trends 2024', 'author' => 'Jane Smith', 'likes' => 189],
            ['id' => 3, 'title' => 'Mastering Object-Oriented PHP', 'author' => 'Bob Johnson', 'likes' => 312]
        ],
        'weather' => [
            ['city' => 'New York', 'temp' => 22, 'condition' => 'Sunny', 'humidity' => 65],
            ['city' => 'London', 'temp' => 15, 'condition' => 'Cloudy', 'humidity' => 80],
            ['city' => 'Tokyo', 'temp' => 28, 'condition' => 'Clear', 'humidity' => 45]
        ],
        'currency' => [
            ['from' => 'USD', 'to' => 'EUR', 'rate' => 0.92],
            ['from' => 'USD', 'to' => 'GBP', 'rate' => 0.79],
            ['from' => 'USD', 'to' => 'JPY', 'rate' => 149.50]
        ]
    ];
    
    return $apis[$endpoint] ?? ['error' => 'Endpoint not found'];
}

// Display API examples
echo "<h3>ðŸŒ Available APIs:</h3>";
echo "<div style='display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0;'>";

$apiEndpoints = [
    'users' => ['icon' => 'ðŸ‘¥', 'name' => 'Users API', 'desc' => 'Get user information'],
    'posts' => ['icon' => 'ðŸ“', 'name' => 'Posts API', 'desc' => 'Fetch blog posts'],
    'weather' => ['icon' => 'ðŸŒ¤ï¸', 'name' => 'Weather API', 'desc' => 'Get weather data'],
    'currency' => ['icon' => 'ðŸ’±', 'name' => 'Currency API', 'desc' => 'Exchange rates']
];

foreach ($apiEndpoints as $key => $api) {
    echo "<div style='background: #f8f9fa; padding: 20px; border-radius: 5px; text-align: center; border: 2px solid #e9ecef;'>";
    echo "<div style='font-size: 2rem; margin-bottom: 10px;'>" . $api['icon'] . "</div>";
    echo "<h4>" . $api['name'] . "</h4>";
    echo "<p style='color: #666; font-size: 0.9rem;'>" . $api['desc'] . "</p>";
    echo "<button onclick=\"fetchAPI('$key')\" style='background: #4F5B93; color: white; border: none; padding: 8px 15px; border-radius: 3px; cursor: pointer; margin-top: 10px;'>Fetch Data</button>";
    echo "</div>";
}

echo "</div>";

// Results container
echo "<div id='apiResults' style='margin: 30px 0;'></div>";

// JavaScript for API calls
echo "<script>
function fetchAPI(endpoint) {
    const results = document.getElementById('apiResults');
    results.innerHTML = '<div style=\"background: #fff3cd; padding: 15px; border-radius: 5px;\">â³ Fetching data from ' + endpoint + ' API...</div>';
    
    // Simulate API call
    setTimeout(() => {
        const mockData = {
            'users': " . json_encode(simulateApiCall('users')) . ",
            'posts': " . json_encode(simulateApiCall('posts')) . ",
            'weather': " . json_encode(simulateApiCall('weather')) . ",
            'currency': " . json_encode(simulateApiCall('currency')) . "
        };
        
        const data = mockData[endpoint];
        displayResults(endpoint, data);
    }, 1000);
}

function displayResults(endpoint, data) {
    const results = document.getElementById('apiResults');
    
    if (data.error) {
        results.innerHTML = '<div style=\"background: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px;\">âŒ Error: ' + data.error + '</div>';
        return;
    }
    
    let html = '<div style=\"background: #d4edda; padding: 15px; border-radius: 5px; margin-bottom: 15px;\">';
    html += '<h3>âœ… Data fetched from ' + endpoint + ' API</h3>';
    html += '<p>Received ' + data.length + ' records</p>';
    html += '</div>';
    
    // Create table based on endpoint
    html += '<table border=\"1\" cellpadding=\"10\" cellspacing=\"0\" style=\"border-collapse: collapse; width: 100%; background: white;\">';
    
    // Table headers
    html += '<thead style=\"background: #4F5B93; color: white;\">';
    html += '<tr>';
    
    if (data.length > 0) {
        Object.keys(data[0]).forEach(key => {
            html += '<th>' + key.toUpperCase() + '</th>';
        });
    }
    
    html += '</tr>';
    html += '</thead>';
    
    // Table body
    html += '<tbody>';
    data.forEach(item => {
        html += '<tr>';
        Object.values(item).forEach(value => {
            html += '<td>' + value + '</td>';
        });
        html += '</tr>';
    });
    html += '</tbody>';
    html += '</table>';
    
    results.innerHTML = html;
}
</script>";

// Real API call example (simulated)
echo "<h3>ðŸ”§ Real API Integration Example:</h3>";
echo "<div style='background: #e7f3ff; padding: 20px; border-radius: 5px; margin: 20px 0;'>";
echo "<pre style='background: #1e1e1e; color: #d4d4d4; padding: 15px; border-radius: 5px; overflow-x: auto;'>";
echo htmlspecialchars('<?php
// Example: Fetching data from JSONPlaceholder API
$url = "https://jsonplaceholder.typicode.com/users";
$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

$response = curl_exec($ch);
curl_close($ch);

if ($response) {
    $users = json_decode($response, true);
    
    foreach ($users as $user) {
        echo "User: " . $user[\'name\'] . " (" . $user[\'email\'] . ")\\n";
    }
} else {
    echo "Failed to fetch data from API";
}
?>');
echo "</pre>";
echo "</div>";

// API Best Practices
echo "<h3>ðŸ“‹ API Best Practices:</h3>";
echo "<div style='background: #f8f9fa; padding: 20px; border-radius: 5px;'>";
echo "<ul>";
echo "<li>âœ… Always handle API errors gracefully</li>";
echo "<li>âœ… Use appropriate HTTP methods (GET, POST, etc.)</li>";
echo "<li>âœ… Implement rate limiting for your APIs</li>";
echo "<li>âœ… Use API keys for authentication</li>";
echo "<li>âœ… Cache responses when appropriate</li>";
echo "<li>âœ… Validate and sanitize API responses</li>";
echo "</ul>";
echo "</div>";

echo "<hr>";
echo "<p><em>Note: These API calls are simulated. For real API integration, use cURL or Guzzle HTTP client.</em></p>";
?>`
        };

        // Load example code with animation
        document.querySelectorAll('.example-card').forEach(card => {
            card.addEventListener('click', () => {
                const example = card.dataset.example;
                if (examples[example]) {
                    // Add click animation
                    card.classList.add('pulse-animation');
                    setTimeout(() => {
                        card.classList.remove('pulse-animation');
                    }, 500);
                    
                    editor.setValue(examples[example]);
                    addOutput('success', `âœ¨ Loaded ${card.querySelector('h4').textContent} example`);
                    editor.focus();
                    updateDebugInfo();
                }
            });
        });

        // Helper function to add output
        function addOutput(type, message) {
            const output = document.getElementById('outputContent');
            const line = document.createElement('div');
            line.className = `output-line ${type}`;
            
            const iconMap = {
                'info': 'fas fa-info-circle',
                'success': 'fas fa-check-circle',
                'error': 'fas fa-exclamation-circle',
                'warning': 'fas fa-exclamation-triangle',
                'output': 'fas fa-angle-right',
                'debug': 'fas fa-bug'
            };
            
            line.innerHTML = `<i class="${iconMap[type] || 'fas fa-angle-right'}"></i> ${message}`;
            output.appendChild(line);
            output.scrollTop = output.scrollHeight;
            
            // Auto-clear old messages if too many
            const lines = output.getElementsByClassName('output-line');
            if (lines.length > 50) {
                for (let i = 0; i < 10; i++) {
                    if (lines[0]) lines[0].remove();
                }
            }
        }

        // Logo animation
        document.getElementById('logo').addEventListener('click', () => {
            addOutput('info', 'ðŸ˜ Welcome to PHP Code Editor!');
            phpElephant.style.display = 'block';
            setTimeout(() => {
                phpElephant.style.display = 'none';
            }, 2000);
        });

        // Handle Ctrl+Enter to run code
        editor.on('keydown', (cm, event) => {
            if ((event.ctrlKey || event.metaKey) && event.key === 'Enter') {
                event.preventDefault();
                document.getElementById('runBtn').click();
            }
        });

        // Handle hash-based code loading
        window.addEventListener('load', () => {
            if (window.location.hash) {
                try {
                    const code = decodeURIComponent(atob(window.location.hash.substring(1)));
                    editor.setValue(code);
                    addOutput('info', 'ðŸ”— Code loaded from URL');
                    updateDebugInfo();
                } catch (e) {
                    addOutput('error', 'âŒ Invalid code in URL');
                }
            }
            
            // Add initial animations
            setTimeout(() => {
                addOutput('success', 'ðŸš€ Editor ready! Start coding...');
            }, 1000);
        });

        // Auto-focus editor and update debug info
        editor.focus();
        setInterval(updateDebugInfo, 10000); // Update debug info every 10 seconds
        
        // Close modals when clicking outside
        window.addEventListener('click', (event) => {
            if (event.target === aboutModal) {
                aboutModal.classList.remove('active');
                document.body.style.overflow = 'auto';
            }
            if (event.target === debugModal) {
                debugModal.classList.remove('active');
                document.body.style.overflow = 'auto';
            }
        });

        // Initialize debug info
        updateDebugInfo();
        
        // Initialize terminal input as hidden
        document.getElementById('terminalInput').style.display = 'none';
        
        // Add welcome animation
        setTimeout(() => {
            document.querySelector('.logo i').style.animation = 'pulse 2s infinite';
        }, 1000);
    </script>
</body>
</html>